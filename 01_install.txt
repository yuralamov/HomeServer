# Создание пользователя sudo  
sudo adduser user  
sudo usermod -aG sudo user  
# Проверка  
su - user  
sudo ls -la /root  
exit  
exit  
ssh user@192.168.0.8  
# Если все ОК, удалить пароль пользователя ubuntu  
sudo apt update  
sudo su  
killall -u ubuntu  
userdel -r ubuntu  
exit  
sudo reboot  
# Смена фамилии хоста  
sudo su  
hostnamectl set-hostname server  
# Может надо, а может так сойдет  
sed -i 's/preserve_hostname: false/preserve_hostname: true/' /etc/cloud/cloud.cfg
exit  
sudo reboot  
# Установка часового пояса  
sudo timedatectl set-timezone Europe/Moscow  
# Конфигурирование локали  
sudo dpkg-reconfigure {locales,console-setup}  
# Что за подкачка после установщика  
swapon --show  
# Если есть, то выключаем, если нет, то ниже на один пункт  
sudo swapoff /swapfile && sudo rm /swapfile
# Вместо /swapfile имя файла полный путь  
# Делаем  
sudo fallocate -l 2G /var/swapfile && sudo chmod 600 /var/swapfile && sudo mkswap /var/swapfile  
ls -lh /var/swapfile  
sudo swapon /var/swapfile  
swapon --show  
# Изменения в fstab  
sudo nano /etc/fstab  
# Обязательно после строки монтирования /var  
/var/swapfile none swap sw 0 0  
sudo reboot  
sudo apt update && sudo apt full-upgrade -y && sudo reboot  
# ssh  
sudo apt install -y ssh  
################ Это все на хосте  
# Создание ключа ssh на хосте  
ssh-keygen -t rsa -b 4096 -C "user@hotmail.com"  
# Здесь адрес почты - подтвержденная почта на github, если нет, то и не надо  
# Запуск агента ssh и импортирование ключа  
eval $(ssh-agent -s)  
ssh-add /home/user/.ssh/id_rsa  
# Копирование публичного ключа на сервер  
ssh-copy-id user@192.168.0.8  
# Если уже был сгенерирован ключ к этому хосту, то удалить старый  
$ ssh-keygen -f "/home/user/.ssh/known_hosts" -R "192.168.0.8"  
# windows openssh  
ssh-keygen -R 192.168.0.8  
# Отключить вход по паролю
sudo nano /etc/ssh/sshd_config
# раскомментировать PasswordAuthentication no
#############  
# Подключение к новоиспеченному серверу по ssh  
ssh user@192.168.0.8  
# ufw  
sudo apt install -y ufw fail2ban && sudo ufw status verbose && sudo ufw app list  
sudo ufw allow OpenSSH && sudo ufw logging medium  
sudo ufw enable && sudo ufw reload && sudo ufw status verbose  
# Нужные прожки  
sudo apt install -y preload apt-transport-https ca-certificates curl wget unzip unrar htop iftop nmon speedtest-cli lm-sensors mc lynx smartmontools gcc gdb default-jdk default-jre build-essential gnupg-agent software-properties-common make python3 python3-pip git net-tools 
sudo reboot
