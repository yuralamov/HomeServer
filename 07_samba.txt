==============================
# Настройка Samba
# Установка samba
$ sudo apt install samba
# Переименуем конфиг
$ sudo mv /etc/samba/smb.conf /etc/samba/smb.conf.bak
# И создадим каталог для полной шары
$ sudo mkdir -p /home/samba/shared/
$ sudo chown -R nobody:nogroup /home/samba/shared/
$ sudo chmod -R 0777 /home/samba/shared/
# Небольшие подготовительные дайствия
# Изменим ограничения на использование файлов
$ sudo cp /etc/security/limits.conf /etc/security/limits.conf.bak
$ sudo nano /etc/security/limits.conf
########
*               -       nofile          16384
root            -       nofile          16384
########
# Зададим сейчас для себя
ulimit -n 16384
# Создаем новый конфиг samba
$ sudo nano /etc/samba/smb.conf
#########
# Global parameters
[global]
        bind interfaces only = Yes
        dns proxy = No
        log file = /var/log/samba/log.%m
        map to guest = Bad User
        max log size = 1000
        name resolve order = bcast host
        netbios name = UBUNTU SHARE
        panic action = /usr/share/samba/panic-action %d
        security = USER
        server min protocol = SMB2
        server string = %h server (Samba, Ubuntu)
        idmap config * : backend = tdb

[Shared]
        create mask = 0777
        directory mask = 0777
        force user = nobody
        guest ok = Yes
        guest only = Yes
        path = /home/samba/shared
        read only = No
########
#Проверим, что получилось
$ testparm
# Перезапуск сервиса
$ sudo systemctl restart smbd.service && sudo systemctl status smbd.service
# Прегрузка файервола
$ sudo ufw reload && sudo ufw status verbose
===================================
