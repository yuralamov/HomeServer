==============================
# Настройка Samba
# Установка samba
$ sudo apt install samba
# Переименуем конфиг
$ sudo mv /etc/samba/smb.conf /backup/asus/etc/samba/smb.conf.orig
# И создадим каталог для полной шары
$ sudo mkdir -p /srv/samba/shared/
$ sudo chown -R nobody:nogroup /srv/samba/shared/
$ sudo chmod -R 0777 /srv/samba/shared/
# Небольшие подготовительные дайствия
# Изменим ограничения на использование файлов
$ sudo mkdir -p /backup/asus/security
$ sudo cp /etc/security/limits.conf /backup/asus/security/limits.conf.orig
$ sudo nano /etc/security/limits.conf
########
*               -       nofile          16384
root            -       nofile          16384
########
# Зададим сейчас для себя
ulimit -n 16384
# Создаем новый конфиг samba
$ sudo nano /etc/samba/smb.conf
#########
Load smb config files from /etc/samba/smb.conf
Processing section "[printers]"
Processing section "[print$]"
Processing section "[Shared]"
Loaded services file OK.
Server role: ROLE_STANDALONE

Press enter to see a dump of your service definitions

# Global parameters
[global]
	dns proxy = No
	log file = /var/log/samba/log.%m
	map to guest = Bad User
	max log size = 1000
	obey pam restrictions = Yes
	pam password change = Yes
	panic action = /usr/share/samba/panic-action %d
	passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
	passwd program = /usr/bin/passwd %u
	server min protocol = SMB2
	server role = standalone server
	server string = %h server (Samba, Ubuntu)
	unix password sync = Yes
	usershare allow guests = Yes
	idmap config * : backend = tdb


[printers]
	browseable = No
	comment = All Printers
	create mask = 0700
	path = /var/spool/samba
	printable = Yes


[print$]
	comment = Printer Drivers
	path = /var/lib/samba/printers


[Shared]
	create mask = 0777
	directory mask = 0777
	force user = nobody
	guest ok = Yes
	guest only = Yes
	path = /srv/samba/shared
	read only = No

########
#Проверим, что получилось
$ testparm
# Перезапуск сервиса
$ sudo systemctl restart smbd.service && sudo systemctl status smbd.service
# Прегрузка файервола
$ sudo ufw reload && sudo ufw status verbose
===================================
